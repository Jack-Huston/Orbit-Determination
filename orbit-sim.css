/* orbit-sim.css
   Light theme (orange/blue gradient) matching your site palette.
   Notes:
   - JS draws plots on <canvas>; CSS only controls layout and sizing.
   - Keep canvas wrappers sized; JS uses getBoundingClientRect() for HiDPI scaling.
*/

/* =========================
   Base + palette
   ========================= */
* { margin: 0; padding: 0; box-sizing: border-box; }

:root{
  --orange-50:#fff7ed; --orange-100:#ffedd5; --orange-200:#fed7aa; --orange-300:#fdba74;
  --orange-400:#fb923c; --orange-500:#f97316; --orange-600:#ea580c; --orange-700:#c2410c;
  --orange-800:#9a3412; --orange-900:#7c2d12;

  --blue-50:#eff6ff; --blue-100:#dbeafe; --blue-200:#bfdbfe; --blue-300:#93c5fd;
  --blue-400:#60a5fa; --blue-500:#3b82f6; --blue-600:#2563eb; --blue-700:#1d4ed8;
  --blue-800:#1e40af; --blue-900:#1e3a8a;

  --red-600:#dc2626; --red-700:#b91c1c;

  --slate-50:#f8fafc; --slate-100:#f1f5f9; --slate-200:#e2e8f0; --slate-300:#cbd5e1;
  --slate-400:#94a3b8; --slate-500:#64748b; --slate-600:#475569; --slate-700:#334155;
  --slate-800:#1e293b; --slate-900:#0f172a;

  --card-bg: rgba(255,255,255,0.92);
  --card-border: var(--orange-100);
  --shadow: 0 10px 25px rgba(0,0,0,0.08);

  --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  --sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;

  --radius: 16px;
}

html, body { height: 100%; }

body{
  font-family: var(--sans);
  line-height: 1.6;
  color: var(--slate-700);
  background: linear-gradient(135deg, var(--slate-50) 0%, var(--orange-50) 50%, var(--blue-50) 100%);
  min-height: 100vh;
}

.mono{ font-family: var(--mono); }
.visually-hidden{ position:absolute !important; width:1px; height:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap; }

/* =========================
   Top bar
   ========================= */
.topbar{
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 1000;
  background: rgba(255,255,255,0.95);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--orange-100);
  box-shadow: 0 1px 3px rgba(0,0,0,0.08);
}

.topbar__inner{
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 1rem;
  height: 64px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  position: relative;
  gap: 1rem;
}

.backlink{
  display:inline-flex;
  align-items:center;
  gap: .5rem;
  color: var(--orange-600);
  text-decoration: none;
  font-weight: 700;
  padding: .5rem .8rem;
  border-radius: .75rem;
  transition: transform .25s ease, background-color .25s ease;
}
.backlink:hover{ background: var(--orange-50); transform: translateX(-3px); }

.brand{
  position:absolute;
  left:50%;
  transform: translateX(-50%);
  text-align:center;
  display:flex;
  flex-direction:column;
  gap: 2px;
}
.brand__title{
  font-weight: 900;
  letter-spacing: .2px;
  background: linear-gradient(to right, var(--orange-700), var(--blue-700));
  -webkit-background-clip:text;
  background-clip:text;
  -webkit-text-fill-color: transparent;
  font-size: 1.05rem;
}
.brand__sub{
  font-size: .8rem;
  color: var(--slate-500);
}

.topbar__status{
  display:flex;
  align-items:center;
  gap: .75rem;
  color: var(--slate-600);
}

/* Pills */
.pill{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding: .35rem .65rem;
  border-radius: 999px;
  border: 1px solid var(--orange-100);
  background: rgba(255,255,255,0.9);
  font-weight: 800;
  letter-spacing: .3px;
  font-size: .75rem;
}
.pill--idle{ border-color: var(--slate-200); color: var(--slate-600); }
.pill--warn{ border-color: var(--orange-200); color: var(--orange-700); background: var(--orange-50); }

/* =========================
   Hero
   ========================= */
.hero{
  padding: 7.5rem 1rem 2.5rem;
  border-bottom: 2px solid var(--orange-100);
  background: linear-gradient(135deg, var(--blue-50), var(--orange-50));
}
.hero__inner{
  max-width: 1280px;
  margin: 0 auto;
  display:grid;
  gap: 1.75rem;
  grid-template-columns: 1.1fr .9fr;
  align-items: start;
}
.hero__title{
  font-size: 2rem;
  line-height: 1.15;
  font-weight: 900;
  color: var(--slate-900);
  margin-bottom: .6rem;
}
.hero__text{
  color: var(--slate-600);
  font-size: 1.02rem;
  max-width: 60ch;
}
.badge{
  display:inline-flex;
  align-items:center;
  gap:.5rem;
  padding: .45rem .8rem;
  border-radius: .75rem;
  background: linear-gradient(135deg, var(--orange-600), var(--red-600));
  color:#fff;
  font-weight: 900;
  font-size: .78rem;
  letter-spacing: .4px;
  text-transform: uppercase;
  width: fit-content;
  margin-bottom: .9rem;
  box-shadow: 0 12px 28px rgba(234,88,12,0.22);
}
.hero__cta{
  margin-top: 1.1rem;
  display:flex;
  gap: .75rem;
  flex-wrap: wrap;
}

.chips{
  margin-top: 1rem;
  display:flex;
  gap: .5rem;
  flex-wrap: wrap;
}
.chip{
  border: 2px solid var(--orange-200);
  background: rgba(255,255,255,0.85);
  padding: .45rem .8rem;
  border-radius: 999px;
  font-weight: 900;
  color: var(--slate-700);
  cursor:pointer;
  transition: transform .2s ease, border-color .2s ease, background-color .2s ease;
}
.chip:hover{ transform: translateY(-1px); border-color: var(--orange-300); background: var(--orange-50); }
.chip.is-active{
  border-color: var(--orange-500);
  color: var(--orange-800);
  background: linear-gradient(135deg, var(--orange-50), rgba(255,255,255,.9));
}

/* Buttons */
.btn{
  border: 2px solid var(--orange-200);
  background: rgba(255,255,255,0.9);
  color: var(--slate-700);
  padding: .7rem 1.05rem;
  border-radius: .85rem;
  font-weight: 900;
  cursor:pointer;
  transition: transform .22s ease, border-color .22s ease, background-color .22s ease, box-shadow .22s ease;
  box-shadow: 0 10px 22px rgba(0,0,0,.06);
}
.btn:hover{ transform: translateY(-2px); border-color: var(--orange-300); background: var(--orange-50); }
.btn:active{ transform: translateY(0); }
.btn--primary{
  border-color: transparent;
  color:#fff;
  background: linear-gradient(135deg, var(--orange-600), var(--red-600));
  box-shadow: 0 14px 28px rgba(234,88,12,0.22);
}
.btn--primary:hover{ background: linear-gradient(135deg, var(--orange-700), var(--red-700)); }
.btn--ghost{
  background: rgba(255,255,255,0.75);
}
.btn--tiny{
  padding: .45rem .7rem;
  font-size: .82rem;
  border-radius: .75rem;
  box-shadow: none;
}

/* Stats cards */
.stats{
  background: var(--card-bg);
  border: 2px solid var(--orange-100);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 1.25rem;
}
.stat{
  display:flex;
  flex-direction:column;
  gap: .2rem;
  margin-bottom: .9rem;
}
.stat__label{
  font-size: .85rem;
  font-weight: 800;
  color: var(--slate-600);
}
.stat__value{
  font-size: 1.3rem;
  font-weight: 900;
  color: var(--slate-900);
}
.stat__hint{
  font-size: .82rem;
  color: var(--slate-500);
}
.stat--small .stat__value{
  font-size: .95rem;
  font-weight: 800;
  color: var(--slate-800);
}

.divider{
  height: 1px;
  background: var(--orange-100);
  margin: .9rem 0;
}
.divider--thin{ margin: .65rem 0; }

/* =========================
   Main layout
   ========================= */
.main{ padding: 1.5rem 1rem 2.5rem; }
.layout{
  max-width: 1280px;
  margin: 0 auto;
  display:grid;
  gap: 1.25rem;
  grid-template-columns: 420px 1fr;
  align-items: start;
}

.panel{
  background: var(--card-bg);
  border: 2px solid var(--orange-100);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow:hidden;
}
.panel__header{
  padding: 1rem 1.1rem;
  border-bottom: 1px solid var(--orange-100);
  background: linear-gradient(135deg, rgba(255,255,255,0.85), var(--orange-50));
}
.panel__title{
  font-size: 1.1rem;
  font-weight: 900;
  color: var(--slate-900);
}
.panel__subtitle{
  margin-top: .25rem;
  font-size: .92rem;
  color: var(--slate-600);
}
.panel__body{
  padding: 1rem 1.1rem 1.15rem;
}
.panel__body--viz{ padding-top: .9rem; }

/* Cards inside settings panel */
.card{
  border: 2px solid var(--orange-100);
  background: rgba(255,255,255,0.92);
  border-radius: 14px;
  padding: .9rem;
  margin-bottom: .9rem;
}
.card__head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: .75rem;
  margin-bottom: .75rem;
}
.card__title{
  font-weight: 900;
  color: var(--slate-900);
  font-size: 1rem;
}
.card__note{
  font-size: .9rem;
  color: var(--slate-600);
  margin-bottom: .8rem;
}
.card__right{ display:flex; gap:.5rem; align-items:center; }

/* Fields */
.field{ display:flex; flex-direction:column; gap:.25rem; }
.field__label{ font-size:.85rem; font-weight: 800; color: var(--slate-700); }
.field__input{
  width: 100%;
  padding: .6rem .7rem;
  border-radius: .75rem;
  border: 2px solid var(--slate-200);
  background: rgba(255,255,255,0.95);
  color: var(--slate-800);
  font-weight: 700;
  outline: none;
  transition: border-color .2s ease, box-shadow .2s ease;
}
.field__input:focus{
  border-color: var(--orange-300);
  box-shadow: 0 0 0 4px rgba(251,146,60,0.18);
}
.field__hint{
  font-size: .78rem;
  color: var(--slate-500);
}
.field--note{
  padding: .65rem .75rem;
  border-radius: .75rem;
  border: 1px dashed var(--orange-200);
  background: linear-gradient(135deg, var(--orange-50), var(--blue-50));
}

/* Toggle */
.toggle{
  display:flex;
  align-items:center;
  gap: .6rem;
  padding: .55rem .6rem;
  border-radius: .75rem;
  border: 2px solid var(--orange-100);
  background: rgba(255,255,255,0.85);
}
.toggle input{ display:none; }
.toggle__pill{
  width: 44px;
  height: 24px;
  border-radius: 999px;
  background: var(--slate-200);
  position: relative;
  flex-shrink: 0;
  transition: background-color .2s ease;
}
.toggle__pill::after{
  content:"";
  position:absolute;
  top: 3px; left: 3px;
  width: 18px; height: 18px;
  border-radius: 50%;
  background: white;
  box-shadow: 0 6px 14px rgba(0,0,0,.12);
  transition: transform .2s ease;
}
.toggle input:checked + .toggle__pill{
  background: linear-gradient(135deg, var(--orange-500), var(--red-600));
}
.toggle input:checked + .toggle__pill::after{ transform: translateX(20px); }
.toggle__text{ font-weight: 900; color: var(--slate-800); font-size: .9rem; display:flex; flex-direction:column; line-height: 1.2; }
.toggle__hint{ font-size: .75rem; color: var(--slate-500); font-weight: 700; margin-top: .15rem; }

/* Grids */
.grid2{ display:grid; grid-template-columns: 1fr 1fr; gap: .75rem; }
.grid3{ display:grid; grid-template-columns: 1fr 1fr 1fr; gap: .75rem; }
.subhead{ font-weight: 900; color: var(--orange-700); margin: .3rem 0 .55rem; }

/* Callout */
.callout{
  display:flex;
  align-items:center;
  gap: .6rem;
  padding: .65rem .75rem;
  border-radius: .75rem;
  border: 2px solid var(--orange-100);
  background: var(--orange-50);
  margin-top: .8rem;
}
.callout__dot{
  width: 10px; height: 10px; border-radius: 50%;
  background: var(--orange-500);
  box-shadow: 0 0 0 5px rgba(251,146,60,0.16);
}
.callout__text{ font-weight: 800; color: var(--slate-700); }

/* =========================
   Thrust control block
   ========================= */
.thruster{
  border: 2px solid var(--orange-100);
  border-radius: 14px;
  padding: .9rem;
  background: linear-gradient(135deg, rgba(255,255,255,.9), var(--blue-50));
}
.thruster__grid{
  display:grid;
  grid-template-columns: 1fr 1.3fr 1fr;
  grid-template-rows: auto auto;
  gap: .55rem;
  align-items: center;
  margin-bottom: .75rem;
}
.thruster__btn{
  border: 2px solid var(--orange-200);
  background: rgba(255,255,255,0.9);
  border-radius: 14px;
  padding: .75rem .6rem;
  font-weight: 900;
  cursor:pointer;
  color: var(--slate-800);
  transition: transform .18s ease, background-color .18s ease, border-color .18s ease;
}
.thruster__btn:hover{ transform: translateY(-2px); border-color: var(--orange-300); background: var(--orange-50); }
.thruster__btn:active{ transform: translateY(0); }
.thruster__btn--ghost{
  background: rgba(255,255,255,0.65);
  border-style: dashed;
}

.thruster__mid{
  grid-column: 2 / 3;
  grid-row: 1 / span 2;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap: .55rem;
  padding: .6rem;
  border-radius: 14px;
  border: 2px solid var(--orange-100);
  background: rgba(255,255,255,0.85);
}
.thruster__craft{
  width: 54px; height: 54px;
  border-radius: 16px;
  background: linear-gradient(135deg, var(--orange-600), var(--blue-600));
  box-shadow: 0 16px 30px rgba(0,0,0,.12);
  position: relative;
}
.thruster__craft::before{
  content:"";
  position:absolute;
  inset: 8px;
  border-radius: 12px;
  border: 2px solid rgba(255,255,255,0.75);
}
.thruster__readouts{
  font-weight: 800;
  color: var(--slate-700);
  font-size: .82rem;
  text-align:center;
}

/* =========================
   Visualization panel
   ========================= */
.orbitbox{
  border: 2px solid var(--orange-100);
  border-radius: var(--radius);
  overflow:hidden;
  background: rgba(255,255,255,0.92);
  margin-bottom: .9rem;
}
.orbitbox__head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 1rem;
  padding: .75rem .9rem;
  border-bottom: 1px solid var(--orange-100);
  background: linear-gradient(135deg, rgba(255,255,255,.85), var(--orange-50));
}
.orbitbox__title{
  font-weight: 900;
  color: var(--slate-900);
}
.orbitbox__controls{ display:flex; gap:.5rem; flex-wrap:wrap; }

.orbitbox__canvaswrap{
  height: 360px;
  position: relative;
  background: radial-gradient(circle at 30% 30%, rgba(59,130,246,0.10) 0%, transparent 55%),
              radial-gradient(circle at 70% 60%, rgba(234,88,12,0.10) 0%, transparent 55%),
              rgba(255,255,255,0.6);
}
.canvas{
  width: 100%;
  height: 100%;
  display:block;
}
.canvas--orbit{
  touch-action: none; /* required for pointer pan/zoom */
}

/* Station strip */
.stationstrip{
  padding: .7rem .85rem .85rem;
  border-top: 1px solid var(--orange-100);
  background: rgba(255,255,255,0.92);
}
.stationstrip__title{
  font-weight: 900;
  color: var(--slate-800);
  font-size: .95rem;
  margin-bottom: .55rem;
}
.stationstrip__board{
  display:grid;
  grid-template-columns: repeat(6, 1fr);
  gap: .5rem;
}

/* Station tiles */
.stationtile{
  border: 2px solid var(--slate-200);
  border-radius: 14px;
  background: rgba(255,255,255,0.9);
  padding: .55rem .55rem .4rem;
  position: relative;
  overflow:hidden;
  min-height: 68px;
  transition: border-color .2s ease, transform .2s ease, box-shadow .2s ease;
}
.stationtile:hover{
  transform: translateY(-1px);
  border-color: var(--orange-200);
  box-shadow: 0 10px 20px rgba(0,0,0,0.06);
}

.stationhead{ display:flex; flex-direction:column; gap:.18rem; }
.stationname{ font-weight: 900; font-size: .73rem; color: var(--slate-800); letter-spacing: .3px; }
.stationmeta{ font-weight: 900; font-size: .7rem; color: var(--slate-500); }

.dishicon{
  position:absolute;
  right: 6px;
  bottom: 6px;
  width: 54px;
  height: 18px;
  opacity: .85;
}
.dishicon svg{ width:100%; height:100%; display:block; }
.dishfill{ fill: rgba(59,130,246,0.16); }
.dishline{ fill: none; stroke: rgba(37,99,235,0.55); stroke-width: 2.2; stroke-linecap: round; stroke-linejoin: round; }

.lightning{
  position:absolute;
  left: 7px;
  bottom: 7px;
  width: 14px;
  height: 14px;
  opacity: 0;
  transform: translateY(3px);
  transition: opacity .18s ease, transform .18s ease;
}
.lightning svg{ width:100%; height:100%; display:block; fill: var(--orange-600); }

.stationtile.is-visible{
  border-color: var(--blue-200);
  background: linear-gradient(135deg, rgba(219,234,254,0.65), rgba(255,255,255,0.9));
}
.stationtile.is-pulsing{
  border-color: var(--orange-300);
  box-shadow: 0 0 0 4px rgba(251,146,60,0.18);
}
.stationtile.is-pulsing .lightning{
  opacity: 1;
  transform: translateY(0);
}

/* =========================
   Tabs + panes
   ========================= */
.tabs{
  display:flex;
  gap: .5rem;
  flex-wrap: wrap;
  margin-bottom: .75rem;
}
.tab{
  border: 2px solid var(--orange-200);
  background: rgba(255,255,255,0.85);
  color: var(--slate-700);
  font-weight: 900;
  padding: .5rem .85rem;
  border-radius: 999px;
  cursor:pointer;
  transition: transform .18s ease, border-color .18s ease, background-color .18s ease;
}
.tab:hover{ transform: translateY(-1px); border-color: var(--orange-300); background: var(--orange-50); }
.tab.is-active{
  border-color: var(--orange-500);
  background: linear-gradient(135deg, var(--orange-50), rgba(255,255,255,0.9));
  color: var(--orange-800);
}

.panes{ position: relative; }
.pane{
  display:none;
  border: 2px solid var(--orange-100);
  border-radius: var(--radius);
  overflow:hidden;
  background: rgba(255,255,255,0.92);
}
.pane.is-active{ display:block; }

.pane__head{
  padding: .75rem .9rem;
  border-bottom: 1px solid var(--orange-100);
  background: linear-gradient(135deg, rgba(255,255,255,.85), var(--blue-50));
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap: 1rem;
  flex-wrap: wrap;
}
.pane__title{ font-weight: 900; color: var(--slate-900); }
.pane__hint{ font-size: .88rem; color: var(--slate-600); }

.pane__canvaswrap{
  height: 480px;
  background: radial-gradient(circle at 20% 20%, rgba(234,88,12,0.08) 0%, transparent 55%),
              radial-gradient(circle at 70% 70%, rgba(37,99,235,0.08) 0%, transparent 55%),
              rgba(255,255,255,0.7);
  position: relative;
  overflow:hidden;
}

.canvas--plot{
  width: 100%;
  height: 100%;
  display:block;
}

/* Measurement pane split */
.pane__measgrid{
  display:grid;
  grid-template-columns: 1fr 320px;
  gap: .8rem;
  padding: .8rem;
}
.pane__measgrid .pane__canvaswrap{
  height: 520px;
  border-radius: 14px;
  border: 2px solid var(--orange-100);
}
.meas__side{
  border-radius: 14px;
  border: 2px solid var(--orange-100);
  background: rgba(255,255,255,0.92);
  overflow:hidden;
}
.meas__sidehead{
  padding: .7rem .8rem;
  border-bottom: 1px solid var(--orange-100);
  background: linear-gradient(135deg, rgba(255,255,255,.85), var(--orange-50));
}
.meas__sidetitle{ font-weight: 900; color: var(--slate-900); }
.meas__sidehint{ font-size: .84rem; color: var(--slate-600); margin-top: .2rem; }
.stationgrid{
  padding: .75rem;
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap: .6rem;
}

/* Hide unused legacy canvas */
.canvas--hidden{ display:none; }

/* =========================
   Footer
   ========================= */
.footer{
  border-top: 1px solid var(--orange-100);
  background: rgba(255,255,255,0.95);
  padding: 1.1rem 1rem;
}
.footer__inner{
  max-width: 1280px;
  margin: 0 auto;
  color: var(--slate-600);
  font-size: .9rem;
}

/* =========================
   Responsive
   ========================= */
@media (max-width: 1100px){
  .layout{ grid-template-columns: 380px 1fr; }
  .pane__measgrid{ grid-template-columns: 1fr; }
  .meas__side{ order: 2; }
}

@media (max-width: 900px){
  .hero__inner{ grid-template-columns: 1fr; }
  .brand{ position: static; transform: none; text-align:left; }
  .layout{ grid-template-columns: 1fr; }
  .panel--settings{ order: 2; }
  .panel--viz{ order: 1; }
  .stationstrip__board{ grid-template-columns: repeat(4,1fr); }
}

@media (max-width: 640px){
  .topbar__inner{ padding: 0 .75rem; }
  .brand{ display:none; } /* keep it clean on tiny screens */
  .hero{ padding-top: 6.5rem; }
  .hero__title{ font-size: 1.7rem; }
  .grid2{ grid-template-columns: 1fr; }
  .grid3{ grid-template-columns: 1fr; }
  .orbitbox__canvaswrap{ height: 300px; }

  /* plots stacked vertically on mobile by making plot canvas tall and single column behavior */
  .pane__canvaswrap{ height: 520px; }

  .stationstrip__board{ grid-template-columns: repeat(3,1fr); }
  .stationgrid{ grid-template-columns: 1fr; }
}
